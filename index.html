<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="module">
        import {toast} from './toast.module.js';
        window.toast = toast;
    </script>
    <title>Toast Notification Test</title>
    <style>
        :root { color-scheme: light dark; }
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 24px; line-height: 1.4; }
        h1 { font-size: 20px; margin: 0 0 12px; }
        .panel { display: grid; grid-template-columns: repeat(2, minmax(280px, 1fr)); gap: 16px; align-items: end; }
        .field { display: grid; gap: 6px; }
        label { font-size: 12px; opacity: 0.8; }
        input[type="text"], input[type="number"], select, textarea { padding: 8px; border-radius: 8px; border: 1px solid #d1d5db; background: transparent; color: inherit; }
        textarea { min-height: 64px; }
        .row { display: flex; gap: 8px; flex-wrap: wrap; }
        button { padding: 8px 12px; border: 0; border-radius: 8px; cursor: pointer; font-weight: 600; }
        .primary { background: #3b82f6; color: #fff; }
        .warn { background: #ef4444; color: #fff; }
        .muted { background: #e5e7eb; color: #1f2937; }
        .log { margin-top: 16px; padding: 8px; border-radius: 8px; background: rgba(148,163,184,0.15); font-family: ui-monospace, SFMono-Regular, Menlo, monospace; white-space: pre-wrap; }
        @media (max-width: 720px) { .panel { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <h1>Toast Notification Playground</h1>

    <div class="panel">
        <div class="field">
            <label>Message (supports HTML)</label>
            <textarea id="msg">This is a message</textarea>
        </div>
        <div class="field">
            <label>Type</label>
            <select id="type">
                <option value="info">info</option>
                <option value="success">success</option>
                <option value="warning">warning</option>
                <option value="error">error</option>
            </select>
        </div>
        <div class="field">
            <label>Position</label>
            <select id="position">
                <option value="top-right">top-right</option>
                <option value="top-left">top-left</option>
                <option value="top-center">top-center</option>
                <option value="bottom-right">bottom-right</option>
                <option value="bottom-left">bottom-left</option>
                <option value="bottom-center">bottom-center</option>
            </select>
        </div>
        <div class="field">
            <label>Animation</label>
            <select id="animation">
                <option value="slide-right">slide-right</option>
                <option value="slide-left">slide-left</option>
                <option value="slide-top">slide-top</option>
                <option value="slide-bottom">slide-bottom</option>
                <option value="zoom-in">zoom-in</option>
            </select>
        </div>
        <div class="field">
            <label>Duration (ms) – set 0 for sticky</label>
            <input id="duration" type="number" value="3000" min="0" step="100" />
        </div>
        <div class="field">
            <label>Custom Icon (emoji/text, optional)</label>
            <input id="icon" type="text" placeholder="e.g. ✅" />
        </div>
        <div class="field">
            <label>Show Loader</label>
            <select id="loader">
                <option value="false" selected>false</option>
                <option value="true">true</option>
            </select>
        </div>
        <div class="field">
            <label>Dismiss on Click (alert only)</label>
            <select id="dismissOnClick">
                <option value="true" selected>true</option>
                <option value="false">false</option>
            </select>
        </div>
        <div class="field">
            <label>Confirm Button Text</label>
            <input id="confirmText" type="text" value="Yes" />
        </div>
        <div class="field">
            <label>Cancel Button Text</label>
            <input id="cancelText" type="text" value="No" />
        </div>
        <div class="field">
            <label>Title (confirm)</label>
            <input id="title" type="text" value="Are you sure?" />
        </div>
        <div class="field">
            <label>Overlay (confirm)</label>
            <select id="overlay">
                <option value="true" selected>true</option>
                <option value="false">false</option>
            </select>
        </div>
        <div class="field">
            <label>Close on Overlay Click (confirm)</label>
            <select id="overlayClose">
                <option value="true" selected>true</option>
                <option value="false">false</option>
            </select>
        </div>
        <div class="field">
            <label>Show Close (×) (confirm)</label>
            <select id="showClose">
                <option value="false" selected>false</option>
                <option value="true">true</option>
            </select>
        </div>
        <div class="field">
            <label>Confirm Button BG (optional)</label>
            <input id="confirmBg" type="text" placeholder="#10b981" />
        </div>
        <div class="field">
            <label>Confirm Button Text Color (optional)</label>
            <input id="confirmColor" type="text" placeholder="#ffffff" />
        </div>
        <div class="field">
            <label>Cancel Button BG (optional)</label>
            <input id="cancelBg" type="text" placeholder="#e5e7eb" />
        </div>
        <div class="field">
            <label>Cancel Button Text Color (optional)</label>
            <input id="cancelColor" type="text" placeholder="#1f2937" />
        </div>
        <div class="field">
            <label>Input Type (confirm)</label>
            <select id="inputType">
                <option value="false">No Input</option>
                <option value="text">Text</option>
                <option value="email">Email</option>
                <option value="password">Password</option>
                <option value="number">Number</option>
                <option value="textarea">Textarea</option>
            </select>
        </div>
        <div class="field">
            <label>Input Placeholder (confirm)</label>
            <input id="inputPlaceholder" type="text" placeholder="Enter value..." />
        </div>
        <div class="field">
            <label>Input Default Value (confirm)</label>
            <input id="inputValue" type="text" placeholder="" />
        </div>
    </div>

    <div class="row" style="margin-top:16px;">
        <button id="btn-alert" class="primary">Show Alert</button>
        <button id="btn-confirm-promise" class="warn">Show Confirm (Promise)</button>
        <button id="btn-confirm-callbacks" class="warn">Show Confirm (Callbacks)</button>
        <button id="btn-loading" class="muted">Show Loading then Update</button>
    </div>

    <div class="log" id="log">Log:</div>

    <script>

    

        const $ = (id) => document.getElementById(id);
        const log = (msg) => {
            const el = $("log");
            el.textContent = `Log: ${msg}`;
        };

        function getCommonOptions() {
            const duration = parseInt($("duration").value, 10) || 0;
            const iconVal = $("icon").value.trim();
            return {
                type: $("type").value,
                position: $("position").value,
                animation: $("animation").value,
                duration,
                icon: iconVal ? iconVal : null,
                showLoader: $("loader").value === 'true',
                dismissOnClick: $("dismissOnClick").value === 'true',
            };
        }

        $("btn-alert").addEventListener('click', () => {
            const options = getCommonOptions();
            toast($("msg").value, {
                ...options,
                onShow: () => log('Alert shown'),
                onDismiss: () => log('Alert dismissed'),
                onClick: () => log('Alert clicked')
            });
        });

        $('btn-confirm-promise').addEventListener('click', async () => {
            const options = getCommonOptions();
            const inputType = $("inputType").value;
            const result = await toast.confirm($("msg").value, {
                ...options,
                type: $("type").value || 'warning',
                confirmText: $("confirmText").value,
                cancelText: $("cancelText").value,
                title: $("title").value,
                input: inputType === 'false' ? false : inputType,
                inputPlaceholder: $("inputPlaceholder").value,
                inputValue: $("inputValue").value,
                useOverlay: $("overlay").value === 'true',
                closeOnOverlayClick: $("overlayClose").value === 'true',
                showClose: $("showClose").value === 'true',
                confirmButtonBg: $("confirmBg").value.trim() || null,
                confirmButtonColor: $("confirmColor").value.trim() || null,
                cancelButtonBg: $("cancelBg").value.trim() || null,
                cancelButtonColor: $("cancelColor").value.trim() || null,
            });
            log(`Confirm (promise) result: ${JSON.stringify(result)}`);
        });

        $("btn-confirm-callbacks").addEventListener('click', () => {
            const options = getCommonOptions();
            const inputType = $("inputType").value;
            toast($("msg").value, {
                ...options,
                mode: 'confirm',
                confirmText: $("confirmText").value,
                cancelText: $("cancelText").value,
                title: $("title").value,
                input: inputType === 'false' ? false : inputType,
                inputPlaceholder: $("inputPlaceholder").value,
                inputValue: $("inputValue").value,
                useOverlay: $("overlay").value === 'true',
                closeOnOverlayClick: $("overlayClose").value === 'true',
                showClose: $("showClose").value === 'true',
                confirmButtonBg: $("confirmBg").value.trim() || null,
                confirmButtonColor: $("confirmColor").value.trim() || null,
                cancelButtonBg: $("cancelBg").value.trim() || null,
                cancelButtonColor: $("cancelColor").value.trim() || null,
                onConfirm: (value) => log(`Confirm (callbacks): YES - Value: ${value}`),
                onCancel: () => log('Confirm (callbacks): NO'),
                onDismiss: () => log('Confirm dismissed')
            });
        });

        $("btn-loading").addEventListener('click', () => {
            const options = getCommonOptions();
            const loaderToast = toast.loading('Loading, please wait…', {
                ...options,
                type: $("type").value || 'info',
                duration: 5000,
            });
            // Simulate async completion then update
            setTimeout(() => {
                loaderToast.update('Done! Updated to success', { type: 'success', duration: 2500 });
                log('Loading finished → success shown');
            }, 2000);
        });
    </script>
</body>
</html>